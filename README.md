# MapLens – WebAR Εφαρμογή με KML

Το **MapLens** είναι μια web εφαρμογή επαυξημένης πραγματικότητας (WebAR) που επιτρέπει την οπτικοποίηση γεωγραφικών δεδομένων από αρχεία KML σε πραγματικό χώρο, χρησιμοποιώντας την κάμερα και το GPS της κινητής συσκευής. Η εφαρμογή υποστηρίζει σημεία, γραμμές και πολύγωνα από πολλαπλά αρχεία KML, προβάλλοντάς τα στην πραγματική τους θέση γύρω από τον χρήστη.

## Χαρακτηριστικά

- **Υποστήριξη πολλαπλών KML**: Μπορείτε να φορτώσετε πολλά αρχεία KML ταυτόχρονα, τα οποία απεικονίζονται όλα στη σκηνή AR.
- **Πολύγωνα στο επίπεδο εδάφους**: Όλα τα πολύγωνα αγνοούν το υψόμετρο του KML και προβάλλονται επίπεδα στο έδαφος, ανεξάρτητα από το altitude που ορίζεται στο αρχείο.
- **Ημιδιαφανή overlay Street View**: Παρέχεται κουμπί *Street View* που εμφανίζει/κρύβει ένα ημιδιάφανο overlay εικόνας Street View από το Google Static API στην κατεύθυνση που κοιτάτε. Έτσι, μπορείτε να συγκρίνετε το πραγματικό περιβάλλον με την εικόνα Street View.
- **Ρυθμιζόμενη διαφάνεια overlay**: Με το slider στο κάτω μέρος, μπορείτε να ρυθμίσετε τη διαφάνεια του overlay Street View, ώστε να βλέπετε είτε περισσότερο το πραγματικό περιβάλλον είτε την εικόνα Street View.
- **Ακρίβεια GPS**: Εμφανίζεται συνεχώς κάτω δεξιά η τρέχουσα ακρίβεια GPS σε μέτρα (π.χ. "Ακρίβεια: 5 μ"), ώστε να γνωρίζετε πόσο αξιόπιστη είναι η τοποθεσία σας.
- **Καθαρισμός και επαναφόρτωση**: Με το κουμπί *Καθαρισμός* μπορείτε να αφαιρέσετε όλα τα φορτωμένα δεδομένα από τη σκηνή, ενώ με *Ανανέωση* μπορείτε να κάνετε reload ολόκληρη την εφαρμογή.
- **Responsive σχεδιασμός**: Η διεπαφή είναι σχεδιασμένη ώστε να προσαρμόζεται άψογα σε οθόνες κινητών συσκευών (fullscreen κάμερα, προσαρμοσμένα μεγέθη κουμπιών/κειμένου). 

## Οδηγίες Χρήσης

1. **Φόρτωση KML**: Πατήστε το κουμπί "Επιλογή KML Αρχείων" και επιλέξτε ένα ή περισσότερα αρχεία KML από τη συσκευή σας.
2. **Δικαιώματα**: Επιτρέψτε την πρόσβαση στην κάμερα και στο GPS όταν σας ζητηθεί. (Σημείωση: Η εφαρμογή λειτουργεί μόνο μέσω HTTPS για να είναι δυνατή η πρόσβαση σε αισθητήρες.)
3. **Προβολή δεδομένων**: Στρέψτε την κάμερα γύρω σας. Τα σημεία εμφανίζονται ως σφαίρες, οι γραμμές ως γραφήματα και τα πολύγωνα ως ημιδιαφανή επίπεδα επιφάνειες στο χώρο, στις πραγματικές τους τοποθεσίες.
4. **Street View overlay**: Χρησιμοποιήστε το κουμπί "Street View" για να εμφανίσετε μια εικόνα Street View στην κατεύθυνση που κοιτάτε. Με το slider κάτω από αυτήν, ρυθμίστε την διαφάνεια της εικόνας σε σχέση με τον πραγματικό κόσμο.
5. **Αφαίρεση δεδομένων**: Πατήστε "Καθαρισμός" για να αφαιρεθούν όλα τα στοιχεία από τη σκηνή (μπορείτε στη συνέχεια να φορτώσετε άλλα αρχεία). Πατήστε "Ανανέωση" για πλήρη επανεκκίνηση της εφαρμογής.

## Τεχνικές Σημειώσεις

- Χρησιμοποιείται το **AR.js** (v3.4.5) σε συνδυασμό με **A-Frame** (v1.3.0) για την υλοποίηση του location-based AR. Η κάμερα συσχετίζεται με το GPS της συσκευής και ενημερώνεται συνεχώς η θέση και ο προσανατολισμός της.
- Η μετατροπή των αρχείων KML σε GeoJSON γίνεται με τη βιβλιοθήκη **toGeoJSON** της Mapbox.
- Όλα τα γεωμετρικά στοιχεία (σημεία, γραμμές, πολύγωνα) που φορτώνονται προσαρμόζονται αυτόματα:
  - Τα πολύγωνα αγνοούν το υψόμετρο (Altitude) και τοποθετούνται στο έδαφος.
  - Οι γραμμές και τα σημεία επίσης θεωρούνται στο επίπεδο του εδάφους (altitude = 0), εκτός αν ορίζεται διαφορετικά στο KML.
- Για το overlay Street View χρησιμοποιείται το **Google Street View Static API**. Στον κώδικα περιλαμβάνεται placeholder API key (`YOUR_API_KEY`) – θα χρειαστεί να το αντικαταστήσετε με το δικό σας Google API key για να λειτουργήσει η φόρτωση των εικόνων.
- Η ακρίβεια GPS λαμβάνεται από την `Geolocation API` της συσκευής (μέσω `watchPosition`) και εμφανίζεται δυναμικά. Αν το GPS σφάλει ή δεν είναι διαθέσιμο, η εφαρμογή συνεχίζει να λειτουργεί, αλλά η τοποθέτηση των αντικειμένων ενδέχεται να είναι ανακριβής.
- Η διεπαφή χρήστη ακολουθεί modern design (glassmorphism / neumorphism) και προσαρμόζεται σε διάφορες αναλύσεις. Για πολύ μικρές οθόνες, μειώνεται ελαφρώς το μέγεθος γραμματοσειρών και κουμπιών για να παραμένουν όλα ευανάγνωστα και λειτουργικά.

## Απαιτήσεις

- **Συσκευή**: Κινητό ή tablet με υποστήριξη WebGL, κάμερας και GPS. (Η εφαρμογή μπορεί να τρέξει και σε desktop με webcam/GPS emulator, αλλά συνίσταται κινητή συσκευή για πλήρη εμπειρία.)
- **Περιηγητής**: Ένας σύγχρονος περιηγητής με υποστήριξη WebXR ή τουλάχιστον WebRTC για κάμερα και HTTPS για geolocation. Δοκιμασμένο σε Chrome και Safari (iOS 15+). Σε iOS, βεβαιωθείτε ότι η ρύθμιση **Motion & Orientation Access** είναι ενεργή (Settings > Safari > Privacy & Security).
- **Δικαιώματα**: Απαιτείται άδεια χρήσης κάμερας και τοποθεσίας. Η εφαρμογή ζητά αυτές τις άδειες κατά την έναρξη.

Καλή εξερεύνηση γεωχωρικών δεδομένων στον πραγματικό κόσμο με το MapLens!  
